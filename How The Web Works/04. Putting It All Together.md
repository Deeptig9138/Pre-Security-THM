# **Putting It All Together**

This room ties together everything learned so far and shows **how all web technologies interact** when a user visits a website.

Understanding this **end-to-end flow** is crucial in cybersecurity because **real attacks never target just one layer** â€” they exploit gaps between DNS, HTTP, servers, databases, and security controls.

---

## **Task 1: Putting It All Together**

When you request a website in your browser, **many things happen behind the scenes** before the page appears on your screen.

### High-Level Flow of a Web Request

1. Your computer needs to know **where the server is**
   - This is done using **DNS (Domain Name System)**

2. Your computer communicates with the server
   - This communication uses the **HTTP/HTTPS protocol**

3. The web server responds with:
   - HTML
   - CSS
   - JavaScript
   - Images
   - Videos

4. Your browser:
   - Interprets the response
   - Renders the webpage visually

> ðŸ§  **Security Insight:**  
> Every step in this chain can be attacked, misconfigured, or abused.

---

## **Task 2: Other Components**

Modern websites rely on additional components to improve **performance, availability, and security**.

### **Load Balancers**

Load balancers are used when:
- Traffic is too high for one server
- High availability is required

#### What Load Balancers Do
- Receive client requests first
- Forward requests to backend servers
- Prevent server overload
- Provide failover if a server goes down

#### Common Load Balancing Algorithms
- **Round-robin** â€“ Sends requests evenly
- **Weighted** â€“ Sends traffic to least busy server

#### Health Checks
Load balancers periodically check if servers are alive.
If a server fails a **health check**, traffic is stopped until it recovers.

> âš ï¸ **Security Insight:**  
> Misconfigured load balancers can expose internal servers or bypass security controls.

### **CDN (Content Delivery Network)**

A CDN hosts **static content** across servers worldwide.

#### Why CDNs Exist
- Reduce latency
- Improve performance
- Reduce server load

Static content includes:
- Images
- CSS
- JavaScript
- Videos

When requested, content is served from the **nearest geographic server**.

> ðŸ§  **Attacker Mindset:**  
> CDN misconfigurations can leak origin servers or cached sensitive data.

### **Databases**

Websites often need to store user data such as:
- Credentials
- Posts
- Preferences
- Logs

Common databases include:
- MySQL
- MSSQL
- MongoDB
- PostgreSQL

Databases can range from:
- Single files
- To distributed clusters for scalability and resilience

> ðŸ” **Security Insight:**  
> Databases are prime targets â€” misconfigured access leads to data breaches.

### **WAF (Web Application Firewall)**

A WAF sits **between the client and the web server**.

#### What a WAF Does
- Detects malicious requests
- Blocks common attack patterns
- Enforces rate limiting
- Identifies bots vs real users

If a request looks malicious, it is **dropped before reaching the server**.

> âš ï¸ **Important:**  
> A WAF is not a replacement for secure code.

### Questions

**Q)** What can be used to host static files and speed up a clientâ€™s visit?  
**A)** CDN  

**Q)** What does a load balancer perform to ensure a host is alive?  
**A)** Health check  

**Q)** What helps protect a website from hacking attempts?  
**A)** WAF  

---

## **Task 3: How Web Servers Work**

### What is a Web Server?

A **web server** is software that:
- Listens for incoming connections
- Uses HTTP/HTTPS to serve content

Common web servers:
- Apache
- Nginx
- IIS
- NodeJS

### Web Server Root Directories

Web servers serve files from a **root directory**:

| Server | Default Root |
|------|-------------|
| Apache / Nginx | `/var/www/html` |
| IIS (Windows) | `C:\inetpub\wwwroot` |

Example: `http://www.example.com/picture.jpg`

â†’ /var/www/html/picture.jpg

### Virtual Hosts

Web servers can host **multiple websites** on a single server using **Virtual Hosts**.

How it works:
- Server checks the `Host` header
- Matches it against configuration files
- Serves the correct website

Example:
- `one.com` â†’ `/var/www/website_one`
- `two.com` â†’ `/var/www/website_two`

> ðŸ§  **Security Insight:**  
> Misconfigured virtual hosts can expose internal or admin sites.

### Static vs Dynamic Content

#### Static Content
- Never changes
- Served directly from disk
- Examples:
  - Images
  - CSS
  - JavaScript
  - Static HTML

#### Dynamic Content
- Changes based on requests
- Generated by backend logic
- Examples:
  - Blogs
  - Search results
  - User dashboards

Dynamic content is processed **on the backend**, then returned as HTML.

### Backend & Scripting Languages

Backend languages enable logic and interactivity:
- PHP
- Python
- Ruby
- NodeJS
- Perl

Example PHP code:
```
<html>
  <body>Hello <?php echo $_GET["name"]; ?>
  </body>
</html>
```

Request: `http://example.com/index.php?name=adam`

Response: 
```
<html>
  <body>Hello adam
  </body>
</html>
```

> âš ï¸ Security Insight:
> Backend logic is hidden â€” but vulnerabilities in it are extremely dangerous.

### Questions
**Q)** What does web server software use to host multiple sites?  
**A)** Virtual Hosts  

**Q)** What is the name for content that can change?  
**A)** Dynamic  

**Q)** Does the client see backend code?  
**A)** Nay 

---

## **Task 4: Quiz**

This task tests your understanding of the full web request lifecycle.

### Flag
**THM{YOU_GOT_THE_ORDER}**

![together](https://github.com/Deeptig9138/Pre-Security-THM/blob/main/screenshots/together.png)

![together1](https://github.com/Deeptig9138/Pre-Security-THM/blob/main/screenshots/together1.png)

![together2](https://github.com/Deeptig9138/Pre-Security-THM/blob/main/screenshots/together2.png)

---

## Key Takeaways

- Web requests involve many interconnected systems
- DNS, HTTP, servers, and browsers all play roles
- Load balancers and CDNs improve performance and availability
- Databases store critical data
- WAFs add defensive layers
- Backend logic introduces powerful functionality â€” and risk

**Understanding the full web stack is essential for:**

- Web exploitation
- SOC analysis
- Architecture reviews
- Secure application development
- Advanced offensive security
